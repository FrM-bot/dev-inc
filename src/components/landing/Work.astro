---
import * as Projects from "@/data/projects.json"
---

<section class='border-b border-white/20 bg-accent-500'>
  <div
    class='mx-auto max-w-7xl border-x border-white/20 px-8 py-12 gradient-grid'
  >
    <div class='mx-auto'>
      <h3 class='text-3xl font-display text-white'>PROYECTOS</h3>
    </div>
  </div>
</section>
<section class='border-b border-white/20 bg-accent-500'>
  <div class='mx-auto max-w-7xl border-white/20 border-x'>
    <div aria-roledescription='carousel'>
      <div
        style='padding-left: 0px; padding-right: 0px;'
        aria-live='polite'
        aria-atomic='true'
        aria-busy='false'
      >
        <div class='flex justify-end items-center border-b border-white/20'>
          <button
            class='bg-aureolin px-3 py-2 cursor-pointer border-aureolin border hover:bg-black hover:text-aureolin duration-150'
            aria-label='slide backward'
            id='prev'
          >
            <svg
              width='8'
              height='14'
              viewBox='0 0 8 14'
              fill='none'
              xmlns='http://www.w3.org/2000/svg'
            >
              <path
                d='M7 1L1 7L7 13'
                stroke='currentColor'
                stroke-width='2'
                stroke-linecap='round'
                stroke-linejoin='round'></path>
            </svg>
          </button>
          <button
            aria-label='slide forward'
            id='next'
            class='bg-aureolin px-3 py-2 cursor-pointer border-aureolin border hover:bg-black hover:text-aureolin duration-150'
          >
            <svg
              width='8'
              height='14'
              viewBox='0 0 8 14'
              fill='none'
              xmlns='http://www.w3.org/2000/svg'
            >
              <path
                d='M1 1L7 7L1 13'
                stroke='currentColor'
                stroke-width='2'
                stroke-linecap='round'
                stroke-linejoin='round'></path>
            </svg>
          </button>
        </div>
        <ul
          class='snap-x overflow-scroll scroll-smooth h-full flex items-center justify-start'
          style='scrollbar-width: none;'
          role='presentation'
          id='carousel'
        >
          {
            Projects.data.map((project) => (
              <li
                class='flex justify-center flex-col shrink-0 snap-center w-full max-w-96'
                // role='tabpanel'
                // aria-roledescription='slide'
                // aria-hidden='true'
              >
                <a href={project.link} target='_blank'>
                  <img
                    alt='work'
                    class='w-full object-cover object-center bg-white border-t border-black lg:border-r aspect-video'
                    src={project.image}
                  />
                </a>
                <div class='text-white text-xs order-first p-3 text-center lg:border-r lg:border-white/20'>
                  <a
                    href={project.link}
                    target='_blank'
                    class='font-semibold line-clamp-1'
                  >
                    {project.title}
                  </a>
                </div>
              </li>
            ))
          }
        </ul>
      </div>
    </div>
  </div>
</section>

<script type='module' is:inline>
  const carousel = document.getElementById("carousel")
  const prev = document.getElementById("prev")
  const next = document.getElementById("next")

  prev.addEventListener("click", () => {
    carousel.scrollBy({ left: -320, behavior: "smooth" })
  })

  next.addEventListener("click", () => {
    carousel.scrollBy({ left: 320, behavior: "smooth" })
  })
</script>
